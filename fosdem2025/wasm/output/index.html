<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml"><head><title>flang and wasm?</title><meta charset="UTF-8"></meta><meta name="generator" content="Hovercraft! 1.0 http://regebro.github.com/hovercraft"></meta><link rel="stylesheet" href="css/hovercraft.css" media="all"></link><link rel="stylesheet" href="css/highlight.css" media="all"></link><link rel="stylesheet" href="font.css" media="screen,projection"></link><script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        showProcessingMessages: false,
        messageStyle: "none",
        TeX : { extensions : ['color.js'] }
      });
    </script></head><body class="impress-not-supported"><div id="impress" data-transition-duration="150"><div class="step step-level-1" step="0" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="0" data-y="0" data-z="0"><h1 id="flang-wasm-3">flang + wasm = &lt;3 (?)</h1><p><strong>Serge &#xAB; sans paille &#xBB; Guelton</strong></p><p>Compiler Engineer / Story Teller / Wood Chopper</p><p><strong>FOSDEM &#x2014; 1st February 2025</strong></p></div><div class="step step-level-1" step="1" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="1600" data-y="0" data-z="0"><img src="game.jpg" width="1000px"></img></div><div class="step step-level-1" step="2" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="3200" data-y="0" data-z="0"><img src="llvm.png" width="1000px"></img><p><strong>flang</strong></p></div><div class="step step-level-1" step="3" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="4800" data-y="0" data-z="0"><img src="fortran.png" width="1000px"></img><p><strong>fortran</strong></p></div><div class="step step-level-1" step="4" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="6400" data-y="0" data-z="0"><img src="elder.jpg" width="1000px"></img><p><strong>elder</strong></p></div><div class="step step-level-1" step="5" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="8000" data-y="0" data-z="0"><img src="science.png" height="800px"></img><p><strong>science</strong></p></div><div class="step step-level-1" step="6" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="9600" data-y="0" data-z="0"><img src="matrix.png" width="1000px"></img><p><strong>matrices</strong></p></div><div class="step step-level-1" step="7" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="11200" data-y="0" data-z="0"><img src="lapack.png" width="1000px"></img><p><strong>LAPACK</strong></p></div><div class="step step-level-1" step="8" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="12800" data-y="0" data-z="0"><img src="scipy.jpg" width="1000px"></img><p><strong>scipy</strong></p></div><div class="step step-level-1" step="9" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="14400" data-y="0" data-z="0"><img src="python.png" width="1000px"></img><p><strong>Python</strong></p></div><div class="step step-level-1" step="10" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="16000" data-y="0" data-z="0"><img src="education.png" width="1000px"></img><p><strong>Education</strong></p></div><div class="step step-level-1" step="11" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="17600" data-y="0" data-z="0"><img src="jupyter.png" width="1000px"></img><p><strong>Jupyter Notebooks</strong></p></div><div class="step step-level-1" step="12" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="19200" data-y="0" data-z="0"><img src="wasm.png" width="1000px"></img><p><strong>WebAssembly</strong></p></div><div class="step step-level-1" step="13" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="20800" data-y="0" data-z="0"><h1 id="summary">Summary</h1><ul><li>People want to run <tt>scipy</tt> in the browser</li><li>They want it fast: they use WebAssembly</li><li>Scipy depends on Fortran: use <tt>flang</tt> to generate WASM code</li></ul></div><div class="step step-level-1" step="14" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="22400" data-y="0" data-z="0"><h1 id="problem">Problem</h1><p>Flang is not a cross compiler!</p><p><em>but</em></p><p>We can bypass the configuration step:</p><ol><li>Configure a different host and target</li><li>Modify the few places where flang assumes <tt>host == target</tt></li></ol></div><div class="step step-level-1" step="15" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="24000" data-y="0" data-z="0"><h1 id="not-sustainable">Not Sustainable?</h1><ul><li>Most hacks needed to by-pass <tt>host == target</tt> upstreamed</li><li><tt>sizeof(integral_type)</tt> hard-coded and patched downstream</li></ul><p>&lt;<tt>/(o_0)\</tt> &gt;</p><p>This is how people currently run R and Python in the browser</p><p>&lt;<tt>/(o_0)\</tt> /&gt;</p></div><div class="step step-level-1" step="16" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="25600" data-y="0" data-z="0"><h1 id="credits">Credits</h1><p>Dr George W Stagg for the original blog post: <a href="https://gws.phd/posts/fortran_wasm/#compiling-blas-and-lapack-for-webassembly">https://gws.phd/posts/fortran_wasm/#compiling-blas-and-lapack-for-webassembly</a></p><p>Wizards of the Coast for the illustration of <em>Game of Chaos</em> and <em>Elder Land Wurm</em></p><p>xkcd, &#xAB;a treasured and carefully guarded point in the space of four-character strings&#xBB;</p></div></div><div id="slide-number" class="slide-number">
         1
      </div><script type="text/javascript" src="js/impress.js"></script><script type="text/javascript" src="js/gotoSlide.js"></script><script type="text/javascript" src="js/hovercraft.js"></script><script type="text/javascript">
      document.getElementById("impress").addEventListener("impress:stepenter", update_slide_number, false);
    </script></body></html>