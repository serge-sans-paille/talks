<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml"><head><title>Gast, Beniget and Memestra</title><meta charset="UTF-8"></meta><meta name="generator" content="Hovercraft! 1.0 http://regebro.github.com/hovercraft"></meta><link rel="stylesheet" href="css/hovercraft.css" media="all"></link><link rel="stylesheet" href="css/impressConsole.css" media="all"></link><link rel="stylesheet" href="css/highlight.css" media="all"></link><link rel="stylesheet" href="font.css" media="screen,projection"></link><script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        showProcessingMessages: false,
        messageStyle: "none",
        TeX : { extensions : ['color.js'] }
      });
    </script></head><body class="impress-not-supported"><div id="impress" data-transition-duration="150"><div class="step step-level-1" step="0" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="0" data-y="0" data-z="0"><h1 id="intro">Intro</h1><p>Python is a dynamic language</p><p><em>Yet</em> people wants static checks</p><p>Could we develop static tooling for Python?</p></div><div class="step step-level-1" step="1" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="1600" data-y="0" data-z="0"><h1 id="prior-works">Prior Works</h1><p><tt>pyflakes</tt>, <tt>pylint</tt>, <tt>mypy</tt> &#x2026;</p><p>Detect unused imports, variable shadowing, undefined variables, style issues,
type inference based on type hints&#x2026;</p></div><div class="step step-level-1" step="2" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="3200" data-y="0" data-z="0"><h1 id="ar-tri-kompagnun">Ar Tri Kompagnun</h1><ul><li><tt>gast</tt>: abstraction of the <tt>ast</tt> package across Python versions</li><li><tt>beniget</tt>: define - use chains computation for any Python program</li><li><tt>memestra</tt>: deprecate use analysis for Python and Jupyter Notebooks</li></ul></div><div class="step step-level-1" step="3" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="4800" data-y="0" data-z="0"><h1 id="dependency-graphs">Dependency Graphs</h1><ul><li><tt>gast</tt> is used by <tt>pythran</tt>, <tt>tangent</tt>, <tt>beniget</tt>&#x2026;</li><li><tt>beniget</tt> is used by <tt>pythran</tt>, <tt>memestra</tt>, <tt>transonic</tt></li></ul></div><div class="step step-level-1" step="4" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="6400" data-y="0" data-z="0"><h1 id="memestra"><tt>memestra</tt></h1><p>Original goal: detect use of deprecated definitions flagged with a decorator in Python modules</p><p>Extended goal: applicable to notebooks</p></div><div class="step step-level-1" step="5" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="8000" data-y="0" data-z="0"><h1 id="basic-example">Basic Example</h1><pre class="highlight code python"><span class="kn">import</span> <span class="nn">decorator</span>
<span class="nd">@decorator.deprecated</span>
<span class="k">def</span> <span class="nf">foo</span><span class="p">():</span> <span class="k">pass</span>
<span class="k">def</span> <span class="nf">bar</span><span class="p">():</span>
    <span class="n">foo</span><span class="p">()</span>
<span class="n">foo</span><span class="p">()</span>

<span class="o">&gt;</span> <span class="n">python</span> <span class="n">memestra</span><span class="o">.</span><span class="n">py</span> <span class="n">test</span><span class="o">.</span><span class="n">py</span>
<span class="n">foo</span> <span class="n">used</span> <span class="n">at</span> <span class="n">test</span><span class="o">.</span><span class="n">py</span><span class="p">:</span><span class="mi">7</span><span class="p">:</span><span class="mi">5</span>
<span class="n">foo</span> <span class="n">used</span> <span class="n">at</span> <span class="n">test</span><span class="o">.</span><span class="n">py</span><span class="p">:</span><span class="mi">9</span><span class="p">:</span><span class="mi">1</span></pre></div><div class="step step-level-1" step="6" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="9600" data-y="0" data-z="0"><h1 id="across-module-boundaries">Across Module Boundaries</h1><pre class="highlight code python"><span class="kn">import</span> <span class="nn">some_module</span> <span class="kn">as</span> <span class="nn">Module</span>
<span class="k">def</span> <span class="nf">bar</span><span class="p">():</span>
    <span class="n">Module</span><span class="o">.</span><span class="n">foo</span><span class="p">()</span>  <span class="c1"># foo is decorated as deprecated</span>
    <span class="n">Module</span><span class="o">.</span><span class="n">bar</span><span class="p">()</span>  <span class="c1"># but bar isn't</span>
<span class="n">Module</span><span class="o">.</span><span class="n">foo</span><span class="p">()</span>

<span class="o">&gt;</span> <span class="n">python</span> <span class="n">memestra</span><span class="o">.</span><span class="n">py</span> <span class="n">test</span><span class="o">.</span><span class="n">py</span>
<span class="n">Module</span><span class="o">.</span><span class="n">foo</span> <span class="n">used</span> <span class="n">at</span> <span class="n">test</span><span class="o">.</span><span class="n">py</span><span class="p">:</span><span class="mi">5</span><span class="p">:</span><span class="mi">5</span>
<span class="n">Module</span><span class="o">.</span><span class="n">foo</span> <span class="n">used</span> <span class="n">at</span> <span class="n">test</span><span class="o">.</span><span class="n">py</span><span class="p">:</span><span class="mi">8</span><span class="p">:</span><span class="mi">1</span></pre></div><div class="step step-level-1" step="7" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="11200" data-y="0" data-z="0"><h1 id="memestra-api">Memestra API</h1><pre class="highlight code python"><span class="n">memestra</span><span class="p">(</span><span class="n">file_descriptor</span> <span class="p">:</span> <span class="n">IO</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">decorator</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span>
    <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">]]</span></pre><p>Usable as an engine for a linter, for LSP integration&#x2026;</p></div><div class="step step-level-1" step="8" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="12800" data-y="0" data-z="0"><h1 id="memestra-plugins">Memestra Plugins</h1><p>Plugins are registered based on the file extension and provide wrappers around
<tt>memestra.memestra</tt>.</p><p>E.g. Jupyter notebook handling:</p><ol><li>Turn cells into plain Python (and record cell &lt;&gt; line mapping)</li><li>Call <tt>memestra.memestra</tt> on the stream</li><li>Use the mapping to report cell errors</li></ol></div><div class="step step-level-1" step="9" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="14400" data-y="0" data-z="0"><h1 id="notebook-example">Notebook Example</h1><pre class="highlight code shell">&gt;  memestra ./tests/misc/memestra_nb_demo.ipynb <span class="se">\
</span>      --decorator decoratortest.deprecated
some_module.foo used at Cell<span class="o">[</span><span class="m">0</span><span class="o">]</span>:2:1
some_module.foo used at Cell<span class="o">[</span><span class="m">0</span><span class="o">]</span>:3:1
some_module.foo used at Cell<span class="o">[</span><span class="m">2</span><span class="o">]</span>:1:1</pre></div><div class="step step-level-1" step="10" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="16000" data-y="0" data-z="0"><h1 id="potential-lsp-applications">Potential LSP Applications</h1><ul><li>More diagnostics: Dead code, unused identifiers?</li><li>Goto declaration (~= def) / usage (~= uses)</li></ul></div><div class="step step-level-1" step="11" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="17600" data-y="0" data-z="0"><h1 id="going-further">Going Further</h1><ul><li>Handle IPython dialect (magics, auto variables&#x2026;)</li><li>Standard deprecation decorator with runtime behavior</li><li>Report message from decorator string</li><li>Handle class members</li><li>Docstring/sphinx plugin</li></ul></div></div><div id="slide-number" class="slide-number">
        1
      </div><div id="hovercraft-help" class="hide"><table><tr><th>Space</th><td>Forward</td></tr><tr><th>Right, Down, Page Down</th><td>Next slide</td></tr><tr><th>Left, Up, Page Up</th><td>Previous slide</td></tr><tr><th>G</th><td>Go to slide number</td></tr><tr><th>P</th><td>Open presenter console</td></tr><tr><th>H</th><td>Toggle this help</td></tr></table></div><script type="text/javascript" src="js/impress.js"></script><script type="text/javascript" src="js/impressConsole.js"></script><script type="text/javascript" src="js/hovercraft.js"></script><script type="text/javascript">
        document.getElementById("impress").addEventListener("impress:stepenter", update_slide_number, false);
      </script></body></html>